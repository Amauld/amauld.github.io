<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body {width: 70vw; border:2px solid blue; margin:auto}
        th,
        td {
            border: 1px solid gray;
            padding: 8px 10px;
        }
        caption {
            font-weight: bold;
            padding: 10px;
        }
    </style>
    <script>
        document.onreadystatechange = function(){
            document.onreadystatechange = function () {
                if (document.readyState == "complete") {
                    main();
                }
            };
        }
        function main(){
            let priorites=[{"idPriorite":"1","priorite":"Très important"},{"idPriorite":"2","priorite":"Important"},{"idPriorite":"3","priorite":"Assez important"},{"idPriorite":"4","priorite":"Peu important"},{"idPriorite":"5","priorite":"Non important"}]
            console.log(priorites)
            let couleurs=[{"idCouleur":"rouge","code":"#FF0000"},{"idCouleur":"vert","code":"#00FF00"},{"idCouleur":"bleu","code":"#0000FF"},{"idCouleur":"cyan","code":"#00FFFF"}]
            console.log(couleurs)
            let categories=[{"idCategorie":"1","categorie":"Personnel"},{"idCategorie":"2","categorie":"Professionel"},{"idCategorie":"3","categorie":"Autre"}]
            console.log(categories)
            let statuts=[{"idStatut":"1","statut":"En attente"},{"idStatut":"2","statut":"Accompli"},{"idStatut":"3","statut":"Annulé"}]
            console.log(statuts)

            let listeTaches = localStorage.getItem("taches")
            console.log(listeTaches)
            listeTaches = JSON.parse(listeTaches)
            listeTaches.forEach(function(item,index){
                console.log(item)
                
                let prioriteId = item.idPriorite
                let prioriteStr = priorites.find(element => element.idPriorite==prioriteId).priorite
                let categorieId = item.idCategorie
                let categorieStr = categories.find(element => element.idCategorie==categorieId).categorie
                let statutId = item.idStatut
                let statutStr = statuts.find(element => element.idStatut==statutId).statut

                let ligne = `<tr><th scope="row">${item.nom}</th><th>${item.desc}</th><th>${item.lieu}</th><th>${item.dateTache}</th><th>${prioriteStr}</th><th>${categorieStr}</th><th>${statutStr}</th></tr>`;
                document.getElementById("tableauTaches").insertAdjacentHTML('beforeend',ligne);
            })
        }
    </script>
</head>
    <body>
        <table>
            <caption>
                Taches
            </caption>
            <thead>
                <tr>
                    <th scope="col">Nom</th>
                    <th scope="col">Description</th>
                    <th scope="col">Lieu</th>
                    <th scope="col">Date</th>
                    <th scope="col">Priorité</th>
                    <th scope="col">Catégorie</th>
                    <th scope="col">Satut</th>
                </tr>
            </thead>
            <tbody id="tableauTaches">
                <!-- <tr>
                    <th scope="row">Python</th>
                    <th>Polyvalent</th>
                    <th>Avancé</th>
                </tr>
                <tr>
                    <th scope="row">C</th>
                    <th>Développement</th>
                    <th>Débutant</th>
                </tr>
                <tr>
                    <th scope="row">Lua</th>
                    <th>Jeux</th>
                    <th>Avancé</th>
                </tr>
                <tr>
                    <th scope="row">HTML</th>
                    <th>Web</th>
                    <th>Débutant</th>
                </tr> -->
            </tbody>
        </table>
        <p><a href="index2.html">Ajouter une tache</a></p>
    </body>
</html>
